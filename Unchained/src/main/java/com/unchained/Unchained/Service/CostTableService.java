package com.unchained.Unchained.Service;

import org.springframework.stereotype.Service;


@Service
public class CostTableService {


    public double getCosts(int pallets, int km) throws Exception {
        double shippingCosts;

        final double[][] CostTable = {
        {58.65, 87.00, 114.50, 137.10, 160.80, 181.65, 201.45, 220.30, 238.35, 255.35, 271.45, 286.55}, //up to 30km
        {67.00, 99.40, 130.85, 156.75, 183.80, 207.55, 230.25, 251.85, 251.85, 272.40, 291.90, 310.25}, //up to 60km
        {75.40, 111.90, 147.15, 176.35, 206.65, 233.50, 259.00, 283.35, 306.45, 328.40, 348.95, 368.40}, //up to 90km
        {83.75, 124.30, 163.50, 195.90, 229.70, 259.45, 287.70, 314.85, 340.50, 364.75, 387.80, 409.40}, //up to 120km
        {92.15, 136.70, 179.80, 215.50, 252.60, 285.30, 316.50, 346.30, 374.50, 401.25, 426.50, 450.35},//up to 150km
        {100.55, 149.20, 196.15, 235.15, 275.60, 311.25, 345.35, 377.75, 408.60, 437.75, 465.35, 491.25}, //up to 180km
        {108.95, 161.55, 212.50, 253.90, 298.60, 337.15, 374.15, 409.30, 442.60, 474.25, 504.05, 532.15}, //up to 210km
        {117.30, 174.05, 228.90, 274.25, 321.55, 363.15, 402.90, 440.75, 476.70, 510.75, 542.90, 573.15}, //up to 240km
        {125.65, 186.45, 245.30, 293.90, 344.55, 389.10, 431.70, 472.20, 510.75, 547.20, 581.60, 614.05}, //up to 270km
        {134.05, 198.85, 261.60, 313.45, 367.50, 415.00, 460.45, 503.70, 544.70, 583.65, 620.35, 655.05}, //up to 300km
        {142.40, 211.30, 277.95, 332.95, 390.45, 441.05, 489.20, 535.20, 578.85, 620.15 ,659.20 ,695.95}, //up to 330km
        {150.75, 223.80, 294.30, 352.65, 413.45, 466.90, 518.00, 566.70, 612.85, 656.65, 697.95, 736.90} //up to 360km
        };

        if (pallets >= 13 || km >= 361){
            throw new Exception("Too much pallets used or too many kilometers to ship");
        } else if(km % 30 == 0) {
            shippingCosts = CostTable[pallets-1][(km/30)-1];
        } else {
            shippingCosts = CostTable[pallets-1][(km/30)];
        }
        return shippingCosts;
    }


}
